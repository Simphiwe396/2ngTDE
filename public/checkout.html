<!doctype html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Checkout - ClinchGlow</title><link rel="stylesheet" href="/styles.css"></head><body><header class="site-header small"><div class="container header-inner"><a class="logo" href="/"><img src="/assets/logo.svg" alt="ClinchGlow" class="logo-icon" /></a></div></header><main class="container checkout-grid"><section class="checkout-form"><h1>Checkout</h1><form id="checkoutForm" method="post" action="/api/create-payfast"><label>Full name<input name="name" required></label><label>Email<input name="email" type="email" required></label><label>Address<textarea name="address" rows="3" required></textarea></label><div class="order-summary"><h2>Order Summary</h2><div id="summaryItems"></div><div class="summary-row"><span>Total</span><strong>R <span id="summaryTotal">0.00</span></strong></div></div><input type="hidden" name="customer" id="customerInput" value="" /><input type="hidden" name="items" id="itemsInput" value="" /><div class="form-actions"><button class="btn btn-primary" type="submit">Pay with PayFast</button><a class="btn btn-ghost" href="/">Continue Shopping</a></div></form><div id="checkoutMsg" class="checkout-msg"></div></section></main><script type="module">import { Cart } from './app.js';const cart = Cart.get();const summaryItems = document.getElementById('summaryItems');const summaryTotal = document.getElementById('summaryTotal');const form = document.getElementById('checkoutForm');const customerInput = document.getElementById('customerInput');const itemsInput = document.getElementById('itemsInput');const msg = document.getElementById('checkoutMsg');function renderSummary(){summaryItems.innerHTML='';let total=0;cart.forEach(i=>{const p=i.product; const line=i.qty * p.price; total+=line; const el = document.createElement('div'); el.className='summary-item'; el.textContent = `${p.name} x${i.qty} â€” R ${line.toFixed(2)}`; summaryItems.appendChild(el);});summaryTotal.textContent = total.toFixed(2);customerInput.value = JSON.stringify({ name: '', email: '', address: '' });itemsInput.value = JSON.stringify(cart.map(i=>({ id:i.product.id, qty:i.qty, name:i.product.name, price:i.product.price })));}form.onsubmit = (e) => {const data = new FormData(form);const customer = { name: data.get('name'), email: data.get('email'), address: data.get('address') };customerInput.value = JSON.stringify(customer);return true;};renderSummary();</script></body></html>